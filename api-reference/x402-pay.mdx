---
title: 'Process Payment'
api: 'GET /api/x402/jobs/{jobId}/pay'
description: 'Process x402 USDC payment for a job'
---

## Authentication

<ParamField header="X-API-Key" type="string" required>
  Your WURK API key
</ParamField>

<ParamField header="X-PAYMENT" type="string" required>
  Payment header generated by x402 client library. Required to complete the payment (second request)
</ParamField>

## Path Parameters

<ParamField path="jobId" type="string" required>
  The job ID (8 character identifier returned from job creation)
</ParamField>

## Flow

<Note>
  This endpoint requires two requests to complete a payment:
</Note>

1. **First Request** (without X-PAYMENT): Returns `402` with payment requirements
2. **Second Request** (with X-PAYMENT): Processes payment and returns `200` on success

<Warning>
  The X-PAYMENT header is **required** to actually process the payment. Without it, you'll only receive the payment requirements (402 response).
</Warning>

## Response

### First Request (402)

<ResponseField name="x402Version" type="number">
  x402 protocol version (currently 1)
</ResponseField>

<ResponseField name="accepts" type="array">
  Array of payment requirement objects with fields:
  - `scheme`: Payment scheme (`"exact"`)
  - `network`: Blockchain network (`"solana"`)
  - `maxAmountRequired`: Amount in smallest unit (e.g., `"2500000"` for 2.5 USDC)
  - `resource`: The payment endpoint URL
  - `payTo`: Recipient wallet address
  - `asset`: Token mint address (USDC: `EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v`)
  - `maxTimeoutSeconds`: Payment timeout (typically 60)
  - `extra`: Additional data including `feePayer` address
</ResponseField>

### Second Request (200)

<ResponseField name="ok" type="boolean">
  Always `true` on success
</ResponseField>

<ResponseField name="paid" type="boolean">
  `true` when payment is confirmed
</ResponseField>

<ResponseField name="jobId" type="string">
  The job ID that was paid
</ResponseField>

<RequestExample>

```bash First Request
curl -X GET "https://wurkapi.fun/api/x402/jobs/89e57c15/pay" \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Accept: application/json"
```

```javascript Second Request (Node.js)
import "dotenv/config";
import bs58 from "bs58";
import { createSigner } from "x402/types";
import { selectPaymentRequirements, createPaymentHeader } from "x402/client";

async function payJob(jobId) {
  // First request - get payment requirements
  const step1 = await fetch(`https://wurkapi.fun/api/x402/jobs/${jobId}/pay`, {
    headers: { 
      'X-API-Key': process.env.WURK_API_KEY,
      'Accept': 'application/json' 
    }
  });
  
  if (step1.status !== 402) {
    throw new Error(`Expected 402, got ${step1.status}`);
  }
  
  const { x402Version, accepts } = await step1.json();
  
  // Select payment requirements and create signer
  const selected = selectPaymentRequirements(accepts, ["solana"], "exact");
  const signer = await createSigner("solana", process.env.PK402);
  
  // Create payment header
  const xpay = await createPaymentHeader(signer, x402Version, selected);
  
  // Second request - submit payment
  const step2 = await fetch(`https://wurkapi.fun/api/x402/jobs/${jobId}/pay`, {
    headers: { 
      'X-API-Key': process.env.WURK_API_KEY,
      'Accept': 'application/json',
      'X-PAYMENT': xpay 
    }
  });
  
  return await step2.json();
}
```

</RequestExample>

<ResponseExample>

```json 402 Response
{
  "x402Version": 1,
  "accepts": [
    {
      "scheme": "exact",
      "network": "solana",
      "maxAmountRequired": "2500000",
      "resource": "https://wurkapi.fun/api/x402/jobs/61038823/pay",
      "description": "",
      "mimeType": "",
      "payTo": "SAT8g2xU7AFy7eUmNJ9SNrM6yYo7LDCi13GXJ8Ez9kC",
      "asset": "EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",
      "maxTimeoutSeconds": 60,
      "extra": {
        "feePayer": "2wKupLR9q6wXYppw8Gr2NvWxKBUqm4PPJKkQfoxHDBg4"
      }
    }
  ]
}
```

```json 200 Response
{
  "ok": true,
  "paid": true,
  "jobId": "89e57c15"
}
```

</ResponseExample>
