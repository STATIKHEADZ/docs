---
title: 'Process Payment (BASE)'
api: 'GET /api/x402/base/jobs/{jobId}/pay'
description: 'Process x402 USDC payment for a job on Base chain'
---

## Authentication

<ParamField header="X-API-Key" type="string" required>
  Your WURK API key
</ParamField>

<ParamField header="X-PAYMENT" type="string" required>
  Payment header generated by x402 client library. Required to complete the payment (second request)
</ParamField>

## Path Parameters

<ParamField path="jobId" type="string" required>
  The job ID (8 character identifier returned from job creation)
</ParamField>

## Flow

<Note>
  This endpoint requires two requests to complete a payment:
</Note>

1. **First Request** (without X-PAYMENT): Returns `402` with payment requirements
2. **Second Request** (with X-PAYMENT): Processes payment and returns `200` on success

<Warning>
  The X-PAYMENT header is **required** to actually process the payment. Without it, you'll only receive the payment requirements (402 response).
</Warning>

## Response

### First Request (402)

<ResponseField name="x402Version" type="number">
  x402 protocol version (currently 1)
</ResponseField>

<ResponseField name="accepts" type="array">
  Array of payment requirement objects with fields:
  - `scheme`: Payment scheme (`"exact"`)
  - `network`: Blockchain network (`"base"`)
  - `maxAmountRequired`: Amount in smallest unit (e.g., `"2500000"` for 2.5 USDC)
  - `resource`: The payment endpoint URL
  - `payTo`: Recipient wallet address  
  - `asset`: USDC contract address on Base (`0x833589fcd6edb6e08f4c7c32d4f71b54bda02913`)
  - `maxTimeoutSeconds`: Payment timeout (typically 60)
  - `extra`: Additional data including:
    - `chainId`: Base mainnet chain ID (8453)
    - `decimals`: USDC decimals (6)
    - `eip712`: EIP-712 domain parameters
    - `name`: Token name (`"USD Coin"`)
    - `version`: EIP-712 version (`"2"`)
</ResponseField>

### Second Request (200)

<ResponseField name="ok" type="boolean">
  Always `true` on success
</ResponseField>

<ResponseField name="paid" type="boolean">
  `true` when payment is confirmed
</ResponseField>

<ResponseField name="jobId" type="string">
  The job ID that was paid
</ResponseField>

<ResponseField name="x-payment-response" type="string">
  Optional header containing settlement details (transaction hash, network)
</ResponseField>

## Implementation Examples

<RequestExample>

```bash First Request
curl -X GET "https://wurkapi.fun/api/x402/base/jobs/89e57c15/pay" \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Accept: application/json"
```

```bash Second Request with Payment
curl -X GET "https://wurkapi.fun/api/x402/base/jobs/89e57c15/pay" \
  -H "X-API-Key: YOUR_API_KEY" \
  -H "Accept: application/json" \
  -H "X-PAYMENT: <x402_header_string>"
```

```typescript TypeScript with x402-axios
import { config } from "dotenv";
import axios from "axios";
import { Hex } from "viem";
import { privateKeyToAccount } from "viem/accounts";
import { withPaymentInterceptor, decodeXPaymentResponse } from "x402-axios";

config();

const PRIVATE_KEY = process.env.PRIVATE_KEY as Hex; // EVM wallet with USDC on Base
const JOB_ID = process.env.JOB_ID as string;
const API_KEY = process.env.API_KEY as string;

if (!PRIVATE_KEY || !JOB_ID || !API_KEY) {
  throw new Error("Missing PRIVATE_KEY, JOB_ID, or API_KEY");
}

const baseURL = "https://wurkapi.fun";
const endpointPath = `/api/x402/base/jobs/${JOB_ID}/pay`;

const account = privateKeyToAccount(PRIVATE_KEY);
const api = withPaymentInterceptor(axios.create({ baseURL }), account);

async function payJob(): Promise<void> {
  const res = await api.get(endpointPath, {
    headers: { 
      "X-API-Key": API_KEY, 
      Accept: "application/json" 
    },
  });

  console.log("status:", res.status, "data:", res.data);

  const xpr = res.headers["x-payment-response"];
  if (xpr) {
    console.log("x-payment-response:", decodeXPaymentResponse(xpr));
  }
}

void payJob().catch((e) => {
  console.error("error:", e?.response?.data || e?.message || e);
});
```

</RequestExample>

## Hosted Payment UI

You can also use a hosted payment interface for wallet-based payments:

```
https://echo.payai.network/?resource=<url-encoded-resource-url>
```

Example for a job payment:
```
https://echo.payai.network/?resource=https%3A%2F%2Fwurkapi.fun%2Fapi%2Fx402%2Fbase%2Fjobs%2F<jobId>%2Fpay
```

<ResponseExample>

```json 402 Response
{
  "x402Version": 1,
  "accepts": [
    {
      "scheme": "exact",
      "network": "base",
      "maxAmountRequired": "2500000",
      "resource": "https://wurkapi.fun/api/x402/base/jobs/21752134/pay",
      "description": "",
      "mimeType": "",
      "payTo": "0xF00DAF15713e82fBb7bDC4b818444D93D655DE96",
      "asset": "0x833589fcd6edb6e08f4c7c32d4f71b54bda02913",
      "maxTimeoutSeconds": 60,
      "extra": {
        "chainId": 8453,
        "decimals": 6,
        "eip712": {
          "name": "USD Coin",
          "version": "2"
        },
        "name": "USD Coin",
        "version": "2"
      }
    }
  ]
}
```

```json 200 Response
{
  "ok": true,
  "paid": true,
  "jobId": "21752134"
}
```

</ResponseExample>

## Common Errors

<Note>
  **`simulation_reverted`**: Usually means insufficient USDC balance. Ensure the payer wallet has at least the `maxAmountRequired` amount of USDC on Base (remember USDC has 6 decimals).
</Note>

<Note>
  **`invalid_exact_evm_payload_signature`**: EIP-712 domain mismatch. The x402-axios interceptor handles this automatically, but if building manually, ensure you use the exact fields from `accepts.extra`.
</Note>

## Technical Details

### EIP-3009 Authorization

The Base implementation uses EIP-3009 (transferWithAuthorization) for USDC transfers. The x402 library automatically:

1. Creates an EIP-712 typed data structure
2. Signs the authorization with your private key
3. Encodes it in the X-PAYMENT header
4. The facilitator verifies and executes the transfer on-chain

### Prerequisites

- EVM wallet with USDC on Base mainnet (chainId: 8453)
- Sufficient USDC balance (check `maxAmountRequired`)
- Optional: Base RPC endpoint for balance checks

### Network Information

- **Chain**: Base Mainnet
- **Chain ID**: 8453
- **USDC Contract**: `0x833589fcd6edb6e08f4c7c32d4f71b54bda02913`
- **Payment Receiver**: `0xF00DAF15713e82fBb7bDC4b818444D93D655DE96`

## Related Resources

- [x402 Supported Networks](https://docs.payai.network/x402/supported-networks)
- [x402 Facilitator Documentation](https://docs.payai.network/x402/facilitators/introduction)
- [Create Job with USDC Payment](/api-reference/create-social-job)
